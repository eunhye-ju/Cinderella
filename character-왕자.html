<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì™•ìì˜ í–‰ë™</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main>
    <h1>ì™•ìì˜ ì„ íƒ: ìˆœì„œ1</h1>
    <p>ë„ì›€ì„ ì¤„ ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”. í•´ë‹¹ ìºë¦­í„°ëŠ” ì™•ì ë‹¤ìŒ ìˆœì„œë¡œ í–‰ë™í•©ë‹ˆë‹¤.</p>
    <div id="choiceArea">
      <button onclick="choose('ì‹ ë°ë ë¼')">ì‹ ë°ë ë¼</button>
      <button onclick="choose('ëŒë¦¬')">ëŒë¦¬</button>
      <button onclick="choose('ì•¨ë¦¬ì‹œì•„')">ì•¨ë¦¬ì‹œì•„</button>
      <button onclick="choose('ì˜ë¶“ì–´ë¨¸ë‹ˆ')">ì˜ë¶“ì–´ë¨¸ë‹ˆ</button>
      <button onclick="choose('ë³‘ì‚¬')">ë³‘ì‚¬</button>
    </div>

    <div id="action2Area" style="display:none; margin-top: 30px;">
      <p>ì•„ì´í…œì„ íŒŒê´´í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì•„ì´í…œ ì´ë¦„: ì² ì œ íœ)</p>
      <input type="text" id="itemInput" placeholder="ì•„ì´í…œ ì´ë¦„ ì…ë ¥">
      <button onclick="saveAction2()">ì•¡ì…˜2 ì €ì¥</button>
    </div>

    
  </main>

  <footer style="
    position: fixed;
    bottom: 40px;
    width: 100%;
    text-align: center;
    z-index: 1000;
  ">
    <button style="
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ffefb0;
      border: 2px solid #999;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    " onclick="resetGame()">ğŸ”„ ì²˜ìŒìœ¼ë¡œ ë˜ëŒì•„ê°€ê¸°</button>
  </footer>

  <script>
    function choose(name) {
      const gameState = JSON.parse(localStorage.getItem("gameState") || "{}");
      if (!gameState.actions) gameState.actions = {};
      gameState.actions["ì™•ì"] = gameState.actions["ì™•ì"] || {};
      gameState.actions["ì™•ì"].action1 = name;
      gameState.orderOverride = name;

      // ìˆœì„œ í ì €ì¥: ì™•ì â†’ ì„ íƒëœ ìºë¦­í„° â†’ ë‚˜ë¨¸ì§€
      const all = ["ë³‘ì‚¬", "ì˜ë¶“ì–´ë¨¸ë‹ˆ", "ì•¨ë¦¬ì‹œì•„", "ì‹ ë°ë ë¼", "ëŒë¦¬"];
      const remaining = all.filter(c => c !== name);
      gameState.orderQueue = [name, ...remaining];

      localStorage.setItem("gameState", JSON.stringify(gameState));
      alert(`${name}ì˜ í–‰ë™ì´ ì™•ì ë‹¤ìŒ ìˆœì„œë¡œ ì´ë™í•©ë‹ˆë‹¤.`);

      // ì•¡ì…˜2 ì˜ì—­ í‘œì‹œ
      document.getElementById("action2Area").style.display = "block";
      // ì•¡ì…˜1 ë²„íŠ¼ ìˆ¨ê¸°ê¸° (ì„ íƒ ì™„ë£Œ í›„ ë‹¤ì‹œ ëª» ë°”ê¾¸ê²Œ)
      document.getElementById("choiceArea").style.display = "none";
    }

    function saveAction2() {
      const item = document.getElementById("itemInput").value.trim();
      if (!item) {
        alert("ì•„ì´í…œ ì´ë¦„ì„ ì…ë ¥í•´ì•¼ ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
      }
      const gameState = JSON.parse(localStorage.getItem("gameState") || "{}");
      gameState.actions = gameState.actions || {};
      gameState.actions["ì™•ì"] = gameState.actions["ì™•ì"] || {};
      gameState.actions["ì™•ì"].action2 = item;
      localStorage.setItem("gameState", JSON.stringify(gameState));
      alert("ì•„ì´í…œ ì‚¬ìš© ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ìºë¦­í„°ë¡œ ì´ë™í•˜ì„¸ìš”.");
      window.location.href = `character-${gameState.orderOverride}.html`;
    }

    function resetGame() {
      localStorage.removeItem("gameState");
      localStorage.removeItem("voteResult");
      location.href = "character-ì™•ì.html";
    }
  </script>
</body>
</html>
